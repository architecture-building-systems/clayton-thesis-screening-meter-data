\subsubsection{Load shape regression-based Features}
\label{sec:regressionmetrics}

Prediction of electrical loads based on their shape and trends over time is a mature field developed to forecast consumption to detect anomalies and analyze the impact of demand response and efficiency measures. The most common technique in this category is the use of heating and cooling degree days to normalize monthly consumption \cite{fels_prism:_1986}. Over the years, various other techniques have been developed using techniques such as neural networks, ARIMA models, and more complex regression \cite{taylor_comparison_2006}. However, simplified techniques have retained their usefulness over time due to ease of implementation and accuracy. In the context of temporal feature creation, a regression model provides various metrics that describe how well a meter conforms to expected assumptions. For example, if actual measurements and predicted consumption match well, the underlying behavior of a energy-consuming systems in the building has been captured adequately. If not, there is uncharacterized phenomenon that will need to be captured with a different type of model or feature. 

A contemporary, simplified load prediction technique is selected to create temporal features that capture whether electrical measurement is simply a function of time-of-week scheduling. This model was developed by Matthieu et al. and Price and implemented mostly in the context of electrical demand response evaluation \cite{price_methods_2010, mathieu_quantifying_2011}. The premise of the model is based on two features: a time-of-week indicator and an outdoor air temperature dependence. This model is also known as the \emph{Time-of-week and Temperature or (TOWT)} model or \emph{LBNL regression model} and is implemented in the \emph{eetd-loadshape} library developed by Lawrence Berkeley National Laboratory\footnote{https://bitbucket.org/berkeleylab/eetd-loadshape}.

According to the literature the model operates as follows \cite{price_methods_2010}. The time of week indicator is created by dividing each week into a set of intervals corresponding to each hour of the week. For example, the first interval is Sunday at 01:00, the second is Sunday at 02:00, and so on. The last, or 168th, interval is Saturday at 23:00. A different regression coefficient, $\alpha_i$, is calculated for each interval in addition to temperature dependence. The model uses outdoor air temperature dependence to divide the intervals into two categories: one for occupied hours and one for unoccupied. These modes are not necessarily indicators of exactly when people are inhabiting the building, but simply an empirical indication of when occupancy-related systems are detected to be operating. Seperate piecewise-continuous temperature dependencies are then calculated for each type of mode. The outdoor air temperature is divided into six equally-sized temperature intervals. A temperature parameter, $\beta_j$, with $j = 1...6$, is assigned to each interval. Within the model, the outdoor air temperature at time, $t$, occuring at time-of-week, $i$, (designated as $T(t_i)$) is divided into six component temperatures, $T_{c,j}(t_i)$. Each of these temperatures is multiplied by $\beta_j$ and then summed to determine the temperature-dependent load. For occupied periods the building load, $L_o$, is calculated by Equation \ref{eq:tempdepload}.

\begin{equation}
\label{eq:tempdepload}
L_0(t_i,T(t_i) = \alpha_i + \sum_{j=1}^{6}\beta_j T_{c,j}(t_i)
\end{equation}

Prediction of unoccupied mode occurs using a single temperature parameter, $\beta_u$. Unnoccupied load, $L_u$, is calculated with Equation \ref{eq:nontempdepload}.

\begin{equation}
\label{eq:nontempdepload}
L_0(t_i,T(t_i) = \alpha_i + \beta_u T_{c,j}(t_i)
\end{equation}

The primary means of temporal feature creation from this process is through the analysis of model fit. The first metric calculated is a normalized, hourly residual, $R$, that can be used to visualize deviations from the model. It is calculated from the actual load, $L_a$, and the predicted load, $L_p$. The residual at a specific hour, $t$, is calculated using Equation \ref{eq:residualerror}.

\begin{equation}
\label{eq:residualerror}
R_t = \frac{L_{t,a} - L_{t,p}{max_{L_a}
\end{equation}

An example of the TOWT model implemented on one of the case study buildings is seen in Figure X. 